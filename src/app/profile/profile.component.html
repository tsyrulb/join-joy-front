<div class="profile-container">
  <nav class="sidebar">
    <ul>
      <li (click)="selectSection('address')" [class.active]="selectedSection === 'address'">Address</li>
      <li (click)="selectSection('photo')" [class.active]="selectedSection === 'photo'">Profile Photo</li>
      <li (click)="selectSection('password')" [class.active]="selectedSection === 'password'">Password</li>
      <li (click)="selectSection('details')" [class.active]="selectedSection === 'details'">Personal Details</li>
    </ul>
  </nav>

  <div class="content">
    <form *ngIf="selectedSection === 'address'" (ngSubmit)="updateProfile()">
      <h3>Update Address</h3>
      <input
        type="text"
        id="address"
        class="form-control"
        *ngIf="user.location?.address"
        [(ngModel)]="user.location.address"
        name="address"
      />
      <button type="submit">Save Address</button>
    </form>

    <form *ngIf="selectedSection === 'photo'" (ngSubmit)="uploadPhoto()">
      <h3>Upload Profile Photo</h3>
      
      <!-- Photo preview -->
      <img *ngIf="photoPreview" [src]="photoPreview" alt="Photo Preview" style="width: 150px; height: auto; margin-bottom: 10px;" />
      <img *ngIf="user.profilePhoto && !photoPreview" [src]="user.profilePhoto" alt="Current Profile Photo" style="width: 150px; height: auto; margin-bottom: 10px;" />
      
      <input type="file" (change)="onFileSelected($event)" />
      <button type="submit">Save Photo</button>

      <!-- Delete button, shown only if there's a profile photo -->
      <button type="button" *ngIf="user.profilePhoto" (click)="deleteProfilePhoto()">Delete Photo</button>
    </form>

    <form *ngIf="selectedSection === 'password'" (ngSubmit)="updateProfile()">
      <h3>Change Password</h3>
      <input type="password" [(ngModel)]="user.password" name="password" placeholder="Enter new password" />
      <button type="submit">Save Password</button>
    </form>

    <form *ngIf="selectedSection === 'details'" (ngSubmit)="updateProfile()">
      <h3>Update Personal Details</h3>
      <input type="text" [(ngModel)]="user.name" name="name" placeholder="Enter your name" />
      <input type="email" [(ngModel)]="user.email" name="email" placeholder="Enter your email" />
      <input type="date" [(ngModel)]="user.dateOfBirth" name="dateOfBirth" />
      <select [(ngModel)]="user.gender" name="gender">
        <option [ngValue]="null" disabled>Select your gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>
      <button type="submit">Save Details</button>
    </form>
  </div>
</div>
