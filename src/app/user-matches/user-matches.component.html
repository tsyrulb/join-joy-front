<div class="container my-4">
  <!-- Material Tabs -->
  <mat-tab-group>
    <!-- Created Invitations -->
    <mat-tab label="Created Invitations">
      <div class="card mt-4">
        <div class="card-header">
          <h5>Created Invitations</h5>
        </div>
        <div class="card-body">
          <input
            type="text"
            class="form-control mb-3"
            placeholder="Search created invitations..."
            [(ngModel)]="createdSearch"
            (input)="filterCreatedMatches()"
          />
          <mat-accordion>
            <mat-expansion-panel *ngFor="let match of filteredCreatedMatches">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Activity: {{ match.activity?.name || 'Unknown Activity' }}
                </mat-panel-title>
                <mat-panel-description>
                  Sent To: {{ match.user2?.name || 'Unknown User' }}
                  <span
                    class="badge ms-2"
                    [class.bg-success]="match.isAccepted"
                    [class.bg-warning]="!match.isAccepted"
                  >
                    {{ match.isAccepted ? 'Accepted' : 'Pending' }}
                  </span>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <div>
                <p><strong>Description:</strong> {{ match.activity?.description }}</p>
                <p><strong>Location:</strong> {{ match.activity?.location?.address }}</p>
                <p><strong>Date:</strong> {{ match.activity?.date | date: 'short' }}</p>
              </div>
              <button
                *ngIf="!match.isAccepted"
                class="btn btn-danger btn-sm"
                (click)="cancelInvitation(match.id)"
              >
                Cancel Invitation
              </button>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>
    </mat-tab>

    <!-- Received Invitations -->
    <mat-tab label="Received Invitations">
      <div class="card mt-4">
        <div class="card-header">
          <h5>Received Invitations</h5>
        </div>
        <div class="card-body">
          <input
            type="text"
            class="form-control mb-3"
            placeholder="Search received invitations..."
            [(ngModel)]="receivedSearch"
            (input)="filterReceivedMatches()"
          />
          <mat-accordion>
            <mat-expansion-panel *ngFor="let match of filteredReceivedMatches">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Activity: {{ match.activity?.name || 'Unknown Activity' }}
                </mat-panel-title>
                <mat-panel-description>
                  From: {{ match.user1?.name || 'Unknown User' }}
                  <span
                    class="badge ms-2"
                    [class.bg-success]="match.isAccepted"
                    [class.bg-warning]="!match.isAccepted"
                  >
                    {{ match.isAccepted ? 'Accepted' : 'Pending' }}
                  </span>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <div>
                <p><strong>Description:</strong> {{ match.activity?.description }}</p>
                <p><strong>Location:</strong> {{ match.activity?.location?.address }}</p>
                <p><strong>Date:</strong> {{ match.activity?.date | date: 'short' }}</p>
              </div>
              <button
                *ngIf="!match.isAccepted"
                class="btn btn-primary btn-sm"
                (click)="acceptInvitation(match.id)"
              >
                Accept Invitation
              </button>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
