<div class="conversations-container">
  <!-- Conversations List -->
  <div class="conversation-list">
    <ul>
      <li
        *ngFor="let conversation of conversations"
        (click)="loadMessagesForConversation(conversation.id)"
        [class.selected]="conversation.id === selectedConversationId"
      >
        <div class="conversation-participants">
          <p>
            Participants:
            <span
              *ngFor="let participant of conversation.participants; let isLast = last"
            >
              {{ participant.user.name }}
              <span *ngIf="!isLast">, </span>
            </span>
          </p>
        </div>
        <span *ngIf="conversation.unreadCount" class="unread-count">
          {{ conversation.unreadCount }}
        </span>
      </li>
    </ul>
  </div>

  <!-- Messages Window -->
  <div class="messages-window" *ngIf="selectedConversationId">
    <app-messages
      [conversationId]="selectedConversationId"
      [participants]="participants"
      [messages]="messages"
    ></app-messages>
  </div>
</div>
